<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro de Información</title>
    <link rel="stylesheet" href="estilos.css">
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const jornadaSelect = document.getElementById("jornada");
            const nivelSelect = document.getElementById("nivel");
            const gradoSelect = document.getElementById("grado");

            const opcionesPorJornada = {
                "Matutina": {
                    "Preprimaria": ["Kínder", "Párvulos", "Preparatoria"],
                    "Primaria": ["1ro Primaria", "2do Primaria", "3ro Primaria", "4to Primaria", "5to Primaria", "6to Primaria"],
                    "Básicos": ["1ro Básico", "2do Básico", "3ro Básico"],
                    "Diversificado": [
                        "4to Computación", "5to Computación",
                        "4to Ciencias y Letras", "5to Ciencias y Letras",
                        "4to Dibujo Técnico", "5to Dibujo Técnico",
                        "4to Perito Contador", "5to Perito Contador", "6to Perito Contador",
                        "4to Administración", "5to Administración", "6to Administración"
                    ]
                },
                "Fin de Semana": {
                    "Básicos": ["1ro Básico", "2do Básico", "3ro Básico", "Básicos por Madurez"],
                    "Diversificado": [
                        "4to Computación", "5to Computación",
                        "4to Ciencias y Letras", "5to Ciencias y Letras",
                        "4to Perito Contador", "5to Perito Contador", "6to Perito Contador",
                        "4to Administración", "5to Administración", "6to Administración",
                        "Bachillerato por Madurez"
                    ]
                }
            };

            function actualizarNiveles() {
                const jornada = jornadaSelect.value;
                nivelSelect.innerHTML = "<option value=''>Seleccione...</option>";
                gradoSelect.innerHTML = "<option value=''>Seleccione un nivel primero...</option>";

                if (opcionesPorJornada[jornada]) {
                    Object.keys(opcionesPorJornada[jornada]).forEach(function (nivel) {
                        const option = document.createElement("option");
                        option.value = nivel;
                        option.textContent = nivel;
                        nivelSelect.appendChild(option);
                    });
                }
            }

            function actualizarGrados() {
                const jornada = jornadaSelect.value;
                const nivel = nivelSelect.value;
                gradoSelect.innerHTML = "<option value=''>Seleccione...</option>";

                if (opcionesPorJornada[jornada] && opcionesPorJornada[jornada][nivel]) {
                    opcionesPorJornada[jornada][nivel].forEach(function (grado) {
                        const option = document.createElement("option");
                        option.value = grado;
                        option.textContent = grado;
                        gradoSelect.appendChild(option);
                    });
                }
            }

            jornadaSelect.addEventListener("change", actualizarNiveles);
            nivelSelect.addEventListener("change", actualizarGrados);
        });
    </script>
</head>
<body>
    <div class="contenedor">
        <header>
            <img src="main/imagenes/logo1.png" alt="Logo MUEBLE" class="logo">
        </header>

        <h1>Registro de Información</h1>
        <form id="formulario-registro" class="formulario">
            <p><strong>Número de Registro:</strong> <span id="numero-registro">001</span></p>

            <label for="nombre-padre">Nombre del Padre/Madre:</label>
            <input type="text" id="nombre-padre" name="nombre-padre" required>

            <label for="telefono">Número de Teléfono 1:</label>
            <input type="tel" id="telefono" name="telefono" required>

            <label for="telefono2">Número de Teléfono 2 (opcional):</label>
            <input type="tel" id="telefono2" name="telefono2">

            <label for="correo">Correo Electrónico:</label>
            <input type="email" id="correo" name="correo" required>

            <label for="nombre-alumno">Nombre del Alumno:</label>
            <input type="text" id="nombre-alumno" name="nombre-alumno" required>

            <label for="edad">Edad:</label>
            <input type="number" id="edad" name="edad" required>

            <label for="jornada">Jornada:</label>
            <select id="jornada" name="jornada" required>
                <option value="">Seleccione...</option>
                <option value="Matutina">Matutina</option>
                <option value="Fin de Semana">Fin de Semana</option>
            </select>

            <label for="nivel">Nivel Educativo:</label>
            <select id="nivel" name="nivel" required>
                <option value="">Seleccione una jornada primero...</option>
            </select>

            <label for="grado">Grado de Interés:</label>
            <select id="grado" name="grado" required>
                <option value="">Seleccione un nivel primero...</option>
            </select>

            <div class="botones">
                <button type="button" id="guardar" class="boton">Guardar</button>
                <button type="button" id="enviar" class="boton">Enviar</button>
                <a href="index.html" class="boton">Volver</a>
            </div>
        </form>
    </div>

    
    <!-- CÓDIGO PARA GUARDAR LA INFORMACIÓN EN EL FORMULARIO -->
    <script>
document.getElementById("guardar").addEventListener("click", function () {
    const datos = {
        nombrePadre: document.getElementById("nombre-padre").value,
        telefono: document.getElementById("telefono").value,
        telefono2: document.getElementById("telefono2").value,
        correo: document.getElementById("correo").value,
        nombreAlumno: document.getElementById("nombre-alumno").value,
        edad: document.getElementById("edad").value,
        jornada: document.getElementById("jornada").value,
        nivel: document.getElementById("nivel").value,
        grado: document.getElementById("grado").value
    };

    fetch("https://script.google.com/macros/s/AKfycbxuvt4DwanvIiKurkypKbDYk_V99fkaS4e6OhAvWxTBIsuMaW4FMV3e2gz3DiTcor5vZw/exec", {
        method: "POST",
        body: JSON.stringify(datos),
        headers: {
            "Content-Type": "application/json"
        }
    })
    .then(res => res.json())
    .then(respuesta => {
        alert("Datos guardados correctamente. Número de registro: " + respuesta.registro);
        // Aquí podrías reiniciar el formulario o actualizar el número de registro
    })
.catch(err => {
    console.error("Error al guardar:", err);
    alert("Error técnico: " + err.message);
});
});
</script>

</body>
</html>
